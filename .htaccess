RewriteEngine On

# Activer la compression gzip si mod_gzip est disponible
<IfModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>

# Gestion des redirections pour Facebook (facebot)

RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} ^lang=Fran%C3%A7ais$ [NC]
RewriteRule ^index\.html$ /index.html?lang=Fran%C3%A7ais [L,R=302]

RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} ^lang=Deutsch$ [NC]
RewriteRule ^index\.html$ /index.html?lang=Deutsch [L,R=302]

RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} ^lang=Italiano$ [NC]
RewriteRule ^index\.html$ /index.html?lang=Italiano [L,R=302]

RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} ^lang=English$ [NC]
RewriteRule ^index\.html$ /index.html?lang=English [L,R=302]

RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} ^lang=Ellinika$ [NC]
RewriteRule ^index\.html$ /index.html?lang=Ellinika [L,R=302]

# Redirection par défaut pour le bot Facebook (si aucune langue n'est spécifiée)
RewriteCond %{HTTP_USER_AGENT} "facebot" [NC]
RewriteCond %{QUERY_STRING} !^lang= [NC]
RewriteRule ^index\.html$ /index.html?lang= [L,R=302]

# Redirection par défaut pour les autres bots et utilisateurs
RewriteCond %{HTTP_USER_AGENT} !facebot [NC]
RewriteCond %{QUERY_STRING} !^lang= [NC]
RewriteRule ^index\.html$ /index.html [L,R=302]
